# CodeMap 用户指南

> CodeMap 是一个强大的代码流程可视化工具，帮助开发者理解代码结构和执行流程。

---

## 📚 目录

- [快速开始](#快速开始)
- [项目管理](#项目管理)
- [CodeMap 管理](#codemap-管理)
- [代码查看](#代码查看)
- [主题切换](#主题切换)
- [代码搜索](#代码搜索)
- [代码对比](#代码对比)
- [常见问题](#常见问题)

---

## 快速开始

### 安装

```bash
# 克隆项目
git clone <repository-url>
cd codemap

# 安装依赖
bun install

# 启动服务
bun run server

# 启动前端（新终端）
cd client
bun install
bun run dev
```

### 访问应用

打开浏览器访问 `http://localhost:5173`

---

## 项目管理

### 注册项目

1. 点击左侧边栏的 "注册项目" 按钮
2. 选择项目目录
3. 填写项目信息
4. 点击 "注册"

### 查看项目列表

- Dashboard 页面显示所有已注册的项目
- 每个项目卡片显示项目名称、描述、路径和更新时间
- 点击项目卡片进入项目详情页

### 删除项目

1. 进入项目详情页
2. 点击 "删除项目" 按钮
3. 确认删除

---

## CodeMap 管理

### 上传 CodeMap

1. 进入项目详情页
2. 点击 "上传 CodeMap" 按钮
3. 选择 CodeMap JSON 文件
4. 填写 CodeMap 信息
5. 点击 "上传"

### 查看 CodeMap

CodeMap 支持三种视图模式：

#### 流程图视图（Mermaid）

- 使用 Mermaid.js 渲染流程图
- 支持缩放和拖拽
- 支持导出为图片

#### 信息图视图

- 使用 AntV Infographic 渲染步骤流程
- 支持交互式导航
- 支持导出为图片

#### 追踪链路视图

- 展示函数调用链路
- 支持展开/折叠
- 支持代码节点跳转

### 删除 CodeMap

1. 进入 CodeMap 详情页
2. 点击 "删除 CodeMap" 按钮
3. 确认删除

---

## 代码查看

### 打开代码面板

- 点击追踪链路中的代码节点
- 代码面板将在右侧打开
- 自动跳转到指定行

### 代码面板功能

- **主题切换**: 支持 7 种主题
- **代码高亮**: 自动语言检测
- **行号显示**: 支持绝对/相对行号
- **自动换行**: 可配置
- **复制代码**: 一键复制

### 关闭代码面板

点击代码面板右上角的关闭按钮。

---

## 主题切换

### 支持的主题

- VS Code Dark（默认）
- VS Code Light
- Monokai
- Solarized Dark
- Solarized Light
- GitHub Dark
- GitHub Light

### 切换主题

1. 打开代码面板
2. 点击右上角的主题切换按钮
3. 选择目标主题

### 主题持久化

主题选择会自动保存，下次打开时自动应用。

---

## 代码搜索

### 全局搜索

1. 按 `Ctrl+Shift+F`（Mac: `Cmd+Shift+F`）打开全局搜索
2. 输入搜索关键词
3. 配置搜索选项：
   - 大小写敏感
   - 整词匹配
   - 正则表达式
4. 查看搜索结果
5. 点击结果跳转到对应位置

### 文件内搜索

1. 按 `Ctrl+F`（Mac: `Cmd+F`）打开搜索框
2. 输入搜索关键词
3. 使用 `Enter` / `Shift+Enter` 导航
4. 使用 `Esc` 关闭搜索框

### 搜索历史

搜索会自动记录历史，方便重复搜索。

---

## 代码对比

### 打开 Diff 视图

1. 选择两个文件或代码片段
2. 点击 "对比" 按钮
3. Diff 视图将打开

### Diff 模式

#### Inline Diff

- 在同一视图中显示差异
- 上下文更清晰

#### Side-by-Side Diff

- 并排显示差异
- 更容易对比

### Diff 导航

- 使用 `F7` / `Shift+F7` 导航差异
- 使用 `Ctrl+G`（Mac: `Cmd+G`）跳转到指定行

### 复制功能

- 复制原始代码
- 复制修改后的代码
- 复制差异统计

---

## 常见问题

### Q: 如何更换主题？

A: 打开代码面板，点击右上角的主题切换按钮，选择目标主题。

### Q: 如何搜索代码？

A: 使用 `Ctrl+Shift+F`（全局搜索）或 `Ctrl+F`（文件内搜索）。

### Q: 如何对比代码？

A: 选择两个文件或代码片段，点击 "对比" 按钮。

### Q: 如何导出 CodeMap？

A: 在 CodeMap 详情页，点击 "导出" 按钮，选择导出格式。

### Q: 如何分享 CodeMap？

A: CodeMap 支持导出为图片或 JSON，可以分享给团队成员。

### Q: 支持哪些语言？

A: CodeMap 支持所有主流编程语言，包括 JavaScript、TypeScript、Python、Java、C++ 等。

### Q: 如何提高性能？

A: CodeMap 使用虚拟滚动和代码分割，性能已经优化。如果遇到性能问题，请检查网络连接和浏览器版本。

### Q: 数据保存在哪里？

A: 所有数据保存在本地文件系统中，不会上传到云端。

### Q: 如何备份数据？

A: 手动备份 `storage/` 目录即可。

### Q: 如何重置应用？

A: 删除 `storage/` 目录，重启应用即可。

---

## 键盘快捷键

### 全局快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+P` / `Cmd+P` | 快速打开 |
| `Ctrl+Shift+P` / `Cmd+Shift+P` | 命令面板 |
| `Ctrl+B` / `Cmd+B` | 切换侧边栏 |

### 代码编辑器快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+F` / `Cmd+F` | 文件内搜索 |
| `Ctrl+Shift+F` / `Cmd+Shift+F` | 全局搜索 |
| `Ctrl+G` / `Cmd+G` | 跳转到行 |
| `F12` | 跳转到定义 |
| `Shift+F12` | 查找所有引用 |
| `Ctrl+Shift+O` / `Cmd+Shift+O` | 跳转到符号 |
| `Shift+Alt+F` | 格式化代码 |
| `Ctrl+S` / `Cmd+S` | 保存文件 |
| `Ctrl+W` / `Cmd+W` | 关闭文件 |

---

## 更新日志

### v1.0.0 (2026-01-18)

- ✅ 初始版本发布
- ✅ 项目管理功能
- ✅ CodeMap 管理功能
- ✅ 代码查看功能
- ✅ 主题切换功能
- ✅ 代码搜索功能
- ✅ 代码对比功能

---

## 获取帮助

- 📖 [文档](./README.md)
- 🐛 [问题反馈](https://github.com/your-repo/issues)
- 💬 [讨论](https://github.com/your-repo/discussions)

---

**最后更新**: 2026-01-18